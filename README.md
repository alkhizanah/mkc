# A straight-forward build tool.

#### Example mkc_config.toml

```toml
# mkc example config file
# Generated by command: mkc init

[tool]
# Compiler to use (g++, clang++, gcc, etc..)
compiler = "g++"

# Number of parallel compilation jobs
parallel_jobs = 1

# Enable watch mode (auto-recompile changed files upon modification)
watch = false

# Logging verbosity: "silent", "normal", "verbose", "debug"
verbosity = "normal"

[build]
# Build mode: "debug" or "release"
mode = "debug"

[paths]
# Added as -I when compiling objects
include = [
  "include",
  "third_party/some_lib/include"
]

# Directories or specific files to exclude from recursive scan.
exclude_dirs = [
  "examples",
  "tests"
]

# File extensions to exclude from recursive scan.
exclude_exts = [
  ".txt",
  ".md",
]

# Static lib to be compiled as a dependency with the project
[[paths.static_lib]]
name = "mylib.a"
sources = ["../deps/foo.cpp", "../deps/bar.cpp"]
include_dirs = ["../deps/include"]



[flags]
# Compilation flags
compile = [
  "-std=c++23",
  "-Wall",
  "-Wextra",
  "-O2",           # Optimization
  "-g",            # Debug symbols
  "-fsanitize=address"  # AddressSanitizer
]

# Linker flags
link = [
  "-lpthread",     # Link pthread
  "-lm",           # Link math library
  "-fsanitize=address"  # Must match compile flags
]

[unity]
# Enable unity build. 
# Automatically generates a unity file combining all sources into one compilation unit.
enabled = false

# Source file name for unity build
source = "one.cpp"

[project]
# Name used for final executables or library
name = "app" 

# Build as shared library (.so) instead of executable
shared = false

[sources]
# Explicitly list source files (optional, overrides auto-discovery)
files = [
  "src/main.cpp",
  "src/utils.cpp"
]

[pkg]
# pkg-config dependencies (e.g., GTK, SDL2)
deps = [
  "gtk4",
  "sdl2"
]
```

#### CLI options 

```rust
Usage: mkc [options]

Config:
  init                    Create example config and initialize current directory
  --config <file>         Load configuration from file
  --watch                 Watch project directory for changes and rebuild.
  --run                   Run the executable after compilation
  --exclude <file>        Exclude directory or specific file
  --exclude-fmt           Exclude a file extension (eg: .c)
  -r, --root <dir>        Set project root directory (default: .)
  -o, --output <name>     Specify output executable name
  --track-external        Track external header dependencies
  
Compiler Options:
  --compiler <compiler>   Specify compiler (default: g++)
  -I <dir>                Add include directory
  -D <define>             Add preprocessor define
  -O <level>              Set optimization level (0, 1, 2, 3, s)
  -f <flag>               Add compiler flag
  -l <lib>                Link library
  -L <dir>                Add library search path
  --unity <name>          Set unity build to true, auto-generate translation unit
  --link-flags            Add arbitrary flags for the linker
  --shared                Use when creating a shared object.

Log Options:
  -h, --help              Show this help message
  -s, --silent            Suppress all non-error output
  -v, --verbose           Enable verbose logging
  -d, --debug-log         Enable debug logging (highest verbosity)
  --error-nums            Enable line number in build error log
  --benchmark             Print time elapsed while building
  --dry-run               Scan, print sources & headers, and exit
  --dry-run-toml          Scan and print sources in toml array format
  --benchmark-msg         Note to be added beside benchmark in the logfile
  --immediate             Force flushing all logs

Examples:
  mkc                           # Normal build
  mkc --clean --debug           # Clean debug build
  mkc -j4 -O3                   # Parallel release build with -O3
  mkc --watch --run             # Watch, rebuild and run on changes
  mkc -o myapp -I./external     # Custom output name and includes
```
